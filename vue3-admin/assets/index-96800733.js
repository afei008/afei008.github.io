import{D as e,T as a,H as o,S as n,G as l,r as t,g as s}from"./antvx6-535a40bf.js";import{r as i,q as d,k as r,o as p,c,d as u,S as h,a1 as v,a3 as f,u as g,aj as m,H as b,U as y,W as x,Y as _,f as C,E as S,af as w,ag as z,a2 as $,a5 as j,F as k,Z as I}from"./vue-8d5f356c.js";import{_ as U}from"./plugin-vueexport-helper-1b428a4d.js";import{a as P}from"./avatar-fe417f06.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{P as B}from"./overlayscrollbars-322272d2.js";import{aR as O,a4 as R,aO as T,ao as N,a7 as A,aN as D,ak as E}from"./antd-ca98a620.js";/* empty css              */const M={width:100,height:100,x:0,y:0,label:"",fill:"transparent",shape:"",img:"",zIndex:0,color:"#000000",fontSize:14,alignItems:"",justifyContent:""},F=e=>({shape:`custom-vue-${e}`,x:0,y:0,data:{...M,label:`${e||""}`,fill:"image"===e?"transparent":"#ffffff",shape:`${e}`}}),H=F(),J=i({node:F(),prop:{...H.data},setShape(e){J.node=e;const a=e.prop();J.prop={...a.data,...a.position,...a.size,zIndex:a.zIndex},e.setData(J.prop)},changeProp(e,a){J.prop={...J.prop,[e]:a},J.node.setData(J.prop)}}),K=i({graph:null,dnd:null,init(a){this.graph=a,this.dnd=new e({target:a,getDropNode:e=>{const a=e.clone();return d((()=>{J.setShape(a)})),a}})},drapShape(e,a){const o=this.graph.createNode(F(a));this.dnd.start(o,e)}}),L={enabled:!0,minWidth:10,minHeight:10},W=i({init(e){e.use(new a({resizing:L}))}}),q=i({init(e){e.use(new o({enabled:!0,beforeAddCommand:(e,a)=>"tools"!==a.key}))}}),G=i({init(e){e.use(new n({enabled:!0}))}}),V=i({graph:"",history:{isUndo:!1,isRedo:!1},init(e){this.graph=e,e.on("node:click",(({node:e})=>{J.setShape(e)})),e.on("node:mousemove",(({node:e})=>{J.setShape(e)})),e.on("node:resizing",(({node:e})=>{J.setShape(e)})),e.on("history:change",(()=>{this.history.isUndo=e.canUndo(),this.history.isRedo=e.canRedo()})),e.on("node:mouseenter",(({node:e})=>{e.addTools({name:"button-remove",args:{x:0,y:0,offset:{x:10,y:10}}})})),e.on("node:mouseleave",(({node:e})=>{e.removeTools()}))}}),X=i({graph:"",init(e){this.graph=e},addShape(e){const a=this.graph.addNode(F(e));J.setShape(a)},changeProp(e,a){if(!J.node.prop)return;let o;o="object"==typeof e?e.target.value:e;const n=J.node.prop();switch(a){case"width":case"height":J.node.prop("size",{...n.size,[a]:o});break;case"x":case"y":J.node.prop("position",{...n.position,[a]:o});break;case"zIndex":J.node.prop("zIndex",o)}J.changeProp(a,o)}});function Y(e){const a=r({});return p((()=>{a.value=new l({...e,container:document.getElementById(e.container)}),W.init(a.value),q.init(a.value),G.init(a.value),K.init(a.value),V.init(a.value),X.init(a.value)})),{graph:a}}function Z(){const e=c("getNode"),a=r({...M}),o=e=>{a.value={...e}};return p((()=>{const a=e();o(a.data),a.on("change:data",(({current:e})=>{o(e)}))})),{nodeStyle:a}}const Q=U(u({__name:"CircleShape",setup(e){const{nodeStyle:a}=Z();return(e,o)=>(h(),v("div",{class:"circle",style:m({display:"flex",alignItems:`${g(a).alignItems}`,justifyContent:`${g(a).justifyContent}`,width:`${g(a).width}px`,height:`${g(a).height}px`,background:`${g(a).fill}`,fontSize:`${g(a).fontSize}px`,color:`${g(a).color}`})},f(g(a).label),5))}}),[["__scopeId","data-v-ddf60aab"]]),ee=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"})),ae=["src"],oe=u({__name:"ImageShape",setup(e){const{nodeStyle:a}=Z();return(e,o)=>(h(),v("img",{class:"image",style:m({width:`${g(a).width}px`,height:`${g(a).height}px`}),src:g(a).img||g(P)},null,12,ae))}}),ne=Object.freeze(Object.defineProperty({__proto__:null,default:oe},Symbol.toStringTag,{value:"Module"})),le=u({__name:"ReactShape",setup(e){const{nodeStyle:a}=Z();return(e,o)=>(h(),v("div",{class:"rect",style:m({display:"flex",alignItems:`${g(a).alignItems}`,justifyContent:`${g(a).justifyContent}`,width:`${g(a).width}px`,height:`${g(a).height}px`,background:`${g(a).fill}`,fontSize:`${g(a).fontSize}px`,color:`${g(a).color}`})},f(g(a).label),5))}}),te=Object.freeze(Object.defineProperty({__proto__:null,default:le},Symbol.toStringTag,{value:"Module"})),se=[],ie=Object.assign({"./CircleShape.vue":ee,"./ImageShape.vue":ne,"./ReactShape.vue":te});Object.keys(ie).forEach((e=>{const a=e.slice(2,-4),o=a.slice(0,1).toLocaleLowerCase()+a.slice(1,-5);t({shape:`custom-vue-${o}`,width:100,height:100,component:ie[e].default}),se.push({shape:o,title:a.slice(0,-5)})}));const de=s();const re=e=>(w("data-v-b18307ae"),e=e(),z(),e),pe={class:"sidebar"},ce={class:"flex"},ue=re((()=>_("div",{class:"addon-before"},"宽度",-1))),he=re((()=>_("div",{class:"addon-before"},"高度",-1))),ve={class:"flex"},fe=re((()=>_("div",{class:"addon-before"},"x",-1))),ge=re((()=>_("div",{class:"addon-before"},"y",-1))),me={class:"flex"},be=re((()=>_("div",{class:"addon-before"},"层级",-1))),ye=re((()=>_("div",{class:"addon-before"},"背景色",-1))),xe={class:"flex"},_e={class:"flex"},Ce=re((()=>_("div",{class:"addon-before"},"文本",-1))),Se={class:"flex"},we=re((()=>_("div",{class:"addon-before"},"大小",-1))),ze=re((()=>_("div",{class:"addon-before"},"颜色",-1))),$e={class:"flex"},je={class:"flex"},ke=re((()=>_("div",{class:"addon-before"},"地址",-1))),Ie=U(u({__name:"index",setup(e){const{prop:a}=b(J),{bind:o}=function(e){const a=i({list:[{value:"",label:"无绑定字段"},{value:"username",label:"用户名"},{value:"gender",label:"性别"},{value:"custom",label:"自定义"}],label:"无绑定字段",value:"",change(o){let n;if("string"!=typeof o)n=o.target.value,e&&e(a.value,"bind");else{n=o;const l=a.list.find((e=>e.value===n));(null==l?void 0:l.value)?a.label=`@{${null==l?void 0:l.label}}`:a.label=`${null==l?void 0:l.label}`,e&&e(a.value,"bind")}e&&e(a.label,"label")}});return{bind:a}}(X.changeProp),n=r(["0"]),l=r(""),t=[{value:"",label:"默认"},{value:"flex-start",label:"顶对齐"},{value:"center",label:"居中对齐"},{value:"flex-end",label:"底对齐"}],s=r(""),d=[{value:"",label:"默认"},{value:"flex-start",label:"左对齐"},{value:"center",label:"居中对齐"},{value:"flex-end",label:"右对齐"}];return(e,i)=>{const r=O,p=R,c=T,u=N,v=A,f=D;return h(),y(g(B),{defer:""},{default:x((()=>[_("div",pe,[C(f,{activeKey:n.value,"onUpdate:activeKey":i[26]||(i[26]=e=>n.value=e)},{default:x((()=>[C(c,{header:"布局"},{default:x((()=>[_("div",ce,[C(r,{value:g(a).width,"onUpdate:value":i[0]||(i[0]=e=>g(a).width=e),min:0,onChange:i[1]||(i[1]=e=>g(X).changeProp(e,"width"))},{addonBefore:x((()=>[ue])),_:1},8,["value"]),C(r,{value:g(a).height,"onUpdate:value":i[2]||(i[2]=e=>g(a).height=e),min:0,onChange:i[3]||(i[3]=e=>g(X).changeProp(e,"height"))},{addonBefore:x((()=>[he])),_:1},8,["value"])]),_("div",ve,[C(r,{value:g(a).x,"onUpdate:value":i[4]||(i[4]=e=>g(a).x=e),min:0,onChange:i[5]||(i[5]=e=>g(X).changeProp(e,"x"))},{addonBefore:x((()=>[fe])),_:1},8,["value"]),C(r,{value:g(a).y,"onUpdate:value":i[6]||(i[6]=e=>g(a).y=e),min:0,onChange:i[7]||(i[7]=e=>g(X).changeProp(e,"y"))},{addonBefore:x((()=>[ge])),_:1},8,["value"])]),_("div",me,[C(r,{value:g(a).zIndex,"onUpdate:value":i[8]||(i[8]=e=>g(a).zIndex=e),min:0,onChange:i[9]||(i[9]=e=>g(X).changeProp(e,"zIndex"))},{addonBefore:x((()=>[be])),_:1},8,["value"]),C(p,{value:g(a).fill,"onUpdate:value":i[10]||(i[10]=e=>g(a).fill=e),disabled:"image"===g(a).shape,type:"color",onChange:i[11]||(i[11]=e=>g(X).changeProp(e,"fill"))},{addonBefore:x((()=>[ye])),_:1},8,["value","disabled"])])])),_:1}),C(c,{header:"文本"},{default:x((()=>[_("div",xe,[C(p,{value:g(o).label,"onUpdate:value":i[13]||(i[13]=e=>g(o).label=e),disabled:"custom"!==g(o).value,onChange:g(o).change},{addonBefore:x((()=>[C(u,{value:g(o).value,"onUpdate:value":i[12]||(i[12]=e=>g(o).value=e),options:g(o).list,onChange:g(o).change},null,8,["value","options","onChange"])])),_:1},8,["value","disabled","onChange"])]),_("div",_e,[C(p,{value:g(a).label,"onUpdate:value":i[14]||(i[14]=e=>g(a).label=e),disabled:""!==g(o).value,onChange:i[15]||(i[15]=e=>g(X).changeProp(e,"label"))},{addonBefore:x((()=>[Ce])),_:1},8,["value","disabled"])]),_("div",Se,[C(r,{value:g(a).fontSize,"onUpdate:value":i[16]||(i[16]=e=>g(a).fontSize=e),min:0,onChange:i[17]||(i[17]=e=>g(X).changeProp(e,"fontSize"))},{addonBefore:x((()=>[we])),_:1},8,["value"]),C(p,{value:g(a).color,"onUpdate:value":i[18]||(i[18]=e=>g(a).color=e),disabled:"image"===g(a).shape,type:"color",onChange:i[19]||(i[19]=e=>g(X).changeProp(e,"color"))},{addonBefore:x((()=>[ze])),_:1},8,["value","disabled"])]),_("div",$e,[C(p,{placeholder:"水平对齐",disabled:""},{addonAfter:x((()=>[C(u,{value:s.value,"onUpdate:value":i[20]||(i[20]=e=>s.value=e),options:d,onChange:i[21]||(i[21]=e=>g(X).changeProp(e,"justifyContent"))},null,8,["value"])])),_:1}),C(p,{placeholder:"垂直对齐",disabled:""},{addonAfter:x((()=>[C(u,{value:l.value,"onUpdate:value":i[22]||(i[22]=e=>l.value=e),options:t,onChange:i[23]||(i[23]=e=>g(X).changeProp(e,"alignItems"))},null,8,["value"])])),_:1})])])),_:1}),C(c,{header:"图片"},{default:x((()=>[_("div",je,[C(p,{value:g(a).img,"onUpdate:value":i[24]||(i[24]=e=>g(a).img=e),onChange:i[25]||(i[25]=e=>g(X).changeProp(e,"img"))},{addonBefore:x((()=>[ke])),addonAfter:x((()=>[C(v,{type:"text",size:"small"},{default:x((()=>[S("上传")])),_:1})])),_:1},8,["value"])])])),_:1})])),_:1},8,["activeKey"])])])),_:1})}}}),[["__scopeId","data-v-b18307ae"]]),Ue={class:"dnd"},Pe=["onMousedown"],Be=["src"],Oe=(e=>(w("data-v-b4851507"),e=e(),z(),e))((()=>_("img",{src:"",alt:""},null,-1)));const Re=u({name:"AntvX6",components:{TeleportContainer:de,DndComp:U(u({__name:"index",setup:e=>(e,a)=>(h(),y(g(B),{defer:""},{default:x((()=>[_("ul",Ue,[(h(!0),v(k,null,$(g(se),(e=>(h(),v("li",{key:e.shape,class:j(["flex ac jc shape",e.shape]),onMousedown:a=>g(K).drapShape(a,e.shape)},["image"===e.shape?(h(),v("img",{key:0,style:{"max-width":"100%"},src:g(P)},null,8,Be)):(h(),v(k,{key:1},[S(f(e.title),1)],64))],42,Pe)))),128)),Oe])])),_:1}))}),[["__scopeId","data-v-b4851507"]]),SidebarComp:Ie,ToolsComp:U(u({__name:"index",setup(e){const a=[{id:"1",position:{x:480,y:130},size:{width:100,height:100},view:"vue-shape-view",shape:"custom-vue-circle",data:{width:100,height:100,x:480,y:130,label:"circle",fill:"#9a7e9a",shape:"circle",img:""},zIndex:1}],{history:o}=b(V),n=()=>{V.graph.fromJSON(a)},l=()=>{V.graph.fromJSON([])},t=()=>{V.graph.zoomTo(1),V.graph.positionPoint({x:0,y:0},0,0)},s=()=>{V.graph.undo()},i=()=>{V.graph.redo()},p=r(!1),c=r(),u=()=>{p.value=!0;const e=V.graph.toJSON().cells.map((e=>e.data));d((()=>{const a=function(e){const a=document.createDocumentFragment();return e.forEach((e=>{let o;"image"===e.shape?(o=document.createElement("img"),o.src=e.img||P):o=document.createElement("div");const n=`\n      position: absolute;\n      background: ${e.fill};\n      width: ${e.width}px;\n      height: ${e.height}px;\n      left: ${e.x}px;\n      top: ${e.y}px;\n      z-index: ${e.zIndex};\n      border-radius: ${"circle"===e.shape?"50%":0};\n      display: flex;\n      align-items: ${e.alignItems};\n      justify-content: ${e.justifyContent};\n      font-size: ${e.fontSize};\n      color: ${e.color};\n      `;o.textContent=e.label,o.setAttribute("style",n),a.appendChild(o)})),a}(e);c.value.appendChild(a)}))},f=()=>{p.value=!1};return(e,a)=>{const d=A,r=E;return h(),v(k,null,[C(d,{type:"primary",onClick:t},{default:x((()=>[S("回到原点")])),_:1}),C(d,{type:"primary",disabled:!g(o).isUndo,onClick:s},{default:x((()=>[S(" 撤销 ")])),_:1},8,["disabled"]),C(d,{type:"primary",disabled:!g(o).isRedo,onClick:i},{default:x((()=>[S(" 重做 ")])),_:1},8,["disabled"]),C(d,{type:"primary",onClick:n},{default:x((()=>[S("加载")])),_:1}),C(d,{type:"primary",onClick:l},{default:x((()=>[S("清空")])),_:1}),C(d,{type:"primary",onClick:u},{default:x((()=>[S("预览")])),_:1}),C(r,{visible:p.value,"onUpdate:visible":a[0]||(a[0]=e=>p.value=e),"destroy-on-close":"",closable:!1,width:"1100px"},{footer:x((()=>[C(d,{key:"back",type:"primary",onClick:f},{default:x((()=>[S("确认")])),_:1})])),default:x((()=>[_("div",{ref_key:"viewRef",ref:c,class:"view-wrap"},null,512)])),_:1},8,["visible"])],64)}}}),[["__scopeId","data-v-e3248f1a"]])},setup(){const{graph:e}=Y({container:"x6",autoResize:!0,grid:{size:10,type:"doubleMesh",visible:!0,args:[{color:"#eee",
// 主网格线颜色
thickness:1},{color:"#ddd",
// 次网格线颜色
thickness:1,
// 次网格线宽度
factor:4}]},panning:!0,mousewheel:!0,background:{color:"#F2F7FA"}});return{graph:e}}}),Te={class:"antv-x6"},Ne={class:"head flex je"},Ae={class:"body flex"},De={class:"left shadow bg-white"},Ee=(e=>(w("data-v-254465b1"),e=e(),z(),e))((()=>_("div",{id:"x6",class:"shadow"},null,-1))),Me={class:"right shadow bg-white"};const Fe=U(Re,[["render",function(e,a,o,n,l,t){const s=I("tools-comp"),i=I("dnd-comp"),d=I("sidebar-comp"),r=I("teleport-container");return h(),v("div",Te,[_("div",Ne,[C(s)]),_("div",Ae,[_("div",De,[C(i)]),Ee,_("div",Me,[C(d)])]),C(r)])}],["__scopeId","data-v-254465b1"]]);export{Fe as default};
