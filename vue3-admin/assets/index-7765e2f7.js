import{c as t,s as n}from"./transform-78bf2321.js";import{w as e,c as a,a as r}from"./array-9cb07d00.js";import{c as u}from"./colors-91c27d7c.js";import{d as o,o as c,R as i,Z as l}from"./vue-51189269.js";import{_ as s}from"./plugin-vueexport-helper-1b428a4d.js";const f=u("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),p=Math.abs,y=Math.atan2,d=Math.cos,h=Math.max,g=Math.min,x=Math.sin,m=Math.sqrt,v=Math.PI,A=v/2,M=2*v;function b(t){return t>1?0:t<-1?v:Math.acos(t)}function R(t){return t>=1?A:t<=-1?-A:Math.asin(t)}function T(t){return t.innerRadius}function w(t){return t.outerRadius}function j(t){return t.startAngle}function P(t){return t.endAngle}function I(t){return t&&t.padAngle}function N(t,n,e,a,r,u,o,c){var i=e-t,l=a-n,s=o-r,f=c-u,p=f*i-s*l;if(!(p*p<1e-12))return[t+(p=(s*(n-u)-f*(t-r))/p)*i,n+p*l]}function $(t,n,e,a,r,u,o){var c=t-e,i=n-a,l=(o?u:-u)/m(c*c+i*i),s=l*i,f=-l*c,p=t+s,y=n+f,d=e+s,g=a+f,x=(p+d)/2,v=(y+g)/2,A=d-p,M=g-y,b=A*A+M*M,R=r-u,T=p*g-d*y,w=(M<0?-1:1)*m(h(0,R*R*b-T*T)),j=(T*M-A*w)/b,P=(-T*A-M*w)/b,I=(T*M+A*w)/b,N=(-T*A+M*w)/b,$=j-x,q=P-v,D=I-x,V=N-v;return $*$+q*q>D*D+V*V&&(j=I,P=N),{cx:j,cy:P,x01:-s,y01:-f,x11:j*(r/R-1),y11:P*(r/R-1)}}function q(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function D(t){return t}const V=[{name:"🍊",count:25},{name:"🍇",count:17},{name:"🍏",count:12},{name:"🍌",count:9},{name:"🍐",count:7},{name:"🍋",count:6},{name:"🍎",count:5},{name:"🍉",count:5}];function Z(t){const{svg:n,data:r,type:u,translate:o}=t,c=r.reduce(((t,n)=>t+n.value),0);let i=0,l=t=>200;"arc"===u&&(i=100),"rose"===u&&(l=t=>t.value/c*100+170);const s=function(){var t=T,n=w,r=a(0),u=null,o=j,c=P,i=I,l=null,s=e(f);function f(){var e,a,f=+t.apply(this,arguments),h=+n.apply(this,arguments),T=o.apply(this,arguments)-A,w=c.apply(this,arguments)-A,j=p(w-T),P=w>T;if(l||(l=e=s()),h<f&&(a=h,h=f,f=a),h>1e-12)if(j>M-1e-12)l.moveTo(h*d(T),h*x(T)),l.arc(0,0,h,T,w,!P),f>1e-12&&(l.moveTo(f*d(w),f*x(w)),l.arc(0,0,f,w,T,P));else{var I,q,D=T,V=w,Z=T,_=w,k=j,z=j,B=i.apply(this,arguments)/2,C=B>1e-12&&(u?+u.apply(this,arguments):m(f*f+h*h)),E=g(p(h-f)/2,+r.apply(this,arguments)),F=E,G=E;if(C>1e-12){var H=R(C/f*x(B)),J=R(C/h*x(B));(k-=2*H)>1e-12?(Z+=H*=P?1:-1,_-=H):(k=0,Z=_=(T+w)/2),(z-=2*J)>1e-12?(D+=J*=P?1:-1,V-=J):(z=0,D=V=(T+w)/2)}var K=h*d(D),L=h*x(D),O=f*d(_),Q=f*x(_);if(E>1e-12){var S,U=h*d(V),W=h*x(V),X=f*d(Z),Y=f*x(Z);if(j<v)if(S=N(K,L,X,Y,U,W,O,Q)){var tt=K-S[0],nt=L-S[1],et=U-S[0],at=W-S[1],rt=1/x(b((tt*et+nt*at)/(m(tt*tt+nt*nt)*m(et*et+at*at)))/2),ut=m(S[0]*S[0]+S[1]*S[1]);F=g(E,(f-ut)/(rt-1)),G=g(E,(h-ut)/(rt+1))}else F=G=0}z>1e-12?G>1e-12?(I=$(X,Y,K,L,h,G,P),q=$(U,W,O,Q,h,G,P),l.moveTo(I.cx+I.x01,I.cy+I.y01),G<E?l.arc(I.cx,I.cy,G,y(I.y01,I.x01),y(q.y01,q.x01),!P):(l.arc(I.cx,I.cy,G,y(I.y01,I.x01),y(I.y11,I.x11),!P),l.arc(0,0,h,y(I.cy+I.y11,I.cx+I.x11),y(q.cy+q.y11,q.cx+q.x11),!P),l.arc(q.cx,q.cy,G,y(q.y11,q.x11),y(q.y01,q.x01),!P))):(l.moveTo(K,L),l.arc(0,0,h,D,V,!P)):l.moveTo(K,L),f>1e-12&&k>1e-12?F>1e-12?(I=$(O,Q,U,W,f,-F,P),q=$(K,L,X,Y,f,-F,P),l.lineTo(I.cx+I.x01,I.cy+I.y01),F<E?l.arc(I.cx,I.cy,F,y(I.y01,I.x01),y(q.y01,q.x01),!P):(l.arc(I.cx,I.cy,F,y(I.y01,I.x01),y(I.y11,I.x11),!P),l.arc(0,0,f,y(I.cy+I.y11,I.cx+I.x11),y(q.cy+q.y11,q.cx+q.x11),P),l.arc(q.cx,q.cy,F,y(q.y11,q.x11),y(q.y01,q.x01),!P))):l.arc(0,0,f,_,Z,P):l.lineTo(O,Q)}else l.moveTo(0,0);if(l.closePath(),e)return l=null,e+""||null}return f.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,a=(+o.apply(this,arguments)+ +c.apply(this,arguments))/2-v/2;return[d(a)*e,x(a)*e]},f.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:a(+n),f):t},f.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:a(+t),f):n},f.cornerRadius=function(t){return arguments.length?(r="function"==typeof t?t:a(+t),f):r},f.padRadius=function(t){return arguments.length?(u=null==t?null:"function"==typeof t?t:a(+t),f):u},f.startAngle=function(t){return arguments.length?(o="function"==typeof t?t:a(+t),f):o},f.endAngle=function(t){return arguments.length?(c="function"==typeof t?t:a(+t),f):c},f.padAngle=function(t){return arguments.length?(i="function"==typeof t?t:a(+t),f):i},f.context=function(t){return arguments.length?(l=null==t?null:t,f):l},f}().innerRadius(i).outerRadius((t=>l(t))).padRadius(100).padAngle(.02).cornerRadius(8),h=n.append("g").attr("transform",o).selectAll("path").data(r).enter().append("g");h.append("path").attr("fill",((t,n)=>f[n])).attr("d",s),h.append("text").text((t=>t.data.name)).attr("transform",(t=>{let n=180*t.endAngle/Math.PI-180*(t.endAngle-t.startAngle)/Math.PI/2,e=140;return n>270?(n-=275,e=-140):n-=85,`rotate(${n}) translate(${e}, -10)`}))}function _(n){const{data:e,width:u,height:o}=n,c=t("svg").attr("width",u).attr("height",o),i=function(){var t=D,n=q,e=null,u=a(0),o=a(M),c=a(0);function i(a){var i,l,s,f,p,y=(a=r(a)).length,d=0,h=new Array(y),g=new Array(y),x=+u.apply(this,arguments),m=Math.min(M,Math.max(-M,o.apply(this,arguments)-x)),v=Math.min(Math.abs(m)/y,c.apply(this,arguments)),A=v*(m<0?-1:1);for(i=0;i<y;++i)(p=g[h[i]=i]=+t(a[i],i,a))>0&&(d+=p);for(null!=n?h.sort((function(t,e){return n(g[t],g[e])})):null!=e&&h.sort((function(t,n){return e(a[t],a[n])})),i=0,s=d?(m-y*A)/d:0;i<y;++i,x=f)l=h[i],f=x+((p=g[l])>0?p*s:0)+A,g[l]={data:a[l],index:i,value:p,startAngle:x,endAngle:f,padAngle:v};return g}return i.value=function(n){return arguments.length?(t="function"==typeof n?n:a(+n),i):t},i.sortValues=function(t){return arguments.length?(n=t,e=null,i):n},i.sort=function(t){return arguments.length?(e=t,n=null,i):e},i.startAngle=function(t){return arguments.length?(u="function"==typeof t?t:a(+t),i):u},i.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:a(+t),i):o},i.padAngle=function(t){return arguments.length?(c="function"==typeof t?t:a(+t),i):c},i}().value((t=>t.count))(e);return Z({svg:c,data:i,type:"arc",translate:"translate(200, 300)"}),Z({svg:c,data:i,type:"pie",translate:"translate(600, 300)"}),Z({svg:c,data:i,type:"rose",translate:"translate(1000, 300)"}),{svg:c}}const k=o({name:"D3Piechart",setup(){const{svg:t}=_({data:V,width:1200,height:600});return c((()=>{n("#path").append((()=>t.node()))})),{}}}),z={id:"path"};const B=s(k,[["render",function(t,n,e,a,r,u){return i(),l("div",z)}]]);export{B as default};
