import{g as l,s as I,w as y,h as p,p as i,c as S}from"./config-5b4cdd90.js";import{e as z}from"./extent-4cf1c809.js";import{m as B}from"./max-adfc8a60.js";import{b as D}from"./band-7fa20a27.js";import{l as N,c as R,a as F,b as L}from"./linear-4029e6a8.js";import{a as V}from"./array-9f3ba611.js";import{c as f}from"./constant-f354b64a.js";import"./init-77b53fdd.js";import"./ordinal-ba9b4969.js";function d(t,a){if((u=t.length)>1)for(var e=1,o,r,n=t[a[0]],u,s=n.length;e<u;++e)for(r=n,n=t[a[e]],o=0;o<s;++o)n[o][1]+=n[o][0]=isNaN(r[o][1])?r[o][0]:r[o][1]}function h(t){for(var a=t.length,e=new Array(a);--a>=0;)e[a]=a;return e}function j(t,a){return t[a]}function q(t){const a=[];return a.key=t,a}function C(){var t=f([]),a=h,e=d,o=j;function r(n){var u=Array.from(t.apply(this,arguments),q),s,k=u.length,v=-1,g;for(const w of n)for(s=0,++v;s<k;++s)(u[s][v]=[0,+o(w,u[s].key,v,n)]).data=w;for(s=0,g=V(a(u));s<k;++s)u[g[s]].index=s;return e(u,g),u}return r.keys=function(n){return arguments.length?(t=typeof n=="function"?n:f(Array.from(n)),r):t},r.value=function(n){return arguments.length?(o=typeof n=="function"?n:f(+n),r):o},r.order=function(n){return arguments.length?(a=n==null?h:typeof n=="function"?n:f(Array.from(n)),r):a},r.offset=function(n){return arguments.length?(e=n??d,r):e},r}function E(t){var a=t.map(G);return h(t).sort(function(e,o){return a[e]-a[o]})}function G(t){for(var a=-1,e=0,o=t.length,r,n=-1/0;++a<o;)(r=+t[a][1])>n&&(n=r,e=a);return e}const b=[{label:"周1",value1:l(10,70),value2:l(10,70)},{label:"周2",value1:l(10,70),value2:l(10,70)},{label:"周3",value1:l(10,70),value2:l(10,70)},{label:"周4",value1:l(10,70),value2:l(10,70)},{label:"周5",value1:l(10,70),value2:l(10,70)},{label:"周6",value1:l(10,70),value2:l(10,70)},{label:"周7",value1:l(10,70),value2:l(10,70)}],A=I("#d3-chart").append("svg").attr("width",y).attr("height",p),H=b.map(t=>t.value1+t.value2),J=z(H,t=>t),K=b.map(t=>t.label),M=[0,B(J)],m=D().domain(K).rangeRound([i.left,y-i.right]).padding(.1),c=N().domain(M).range([p-i.bottom,i.top]),x=R("svg").attr("viewBox",[0,0,y,p]);x.append("g").attr("transform",`translate(0, ${p-i.bottom})`).call(F(m));x.append("g").attr("transform",`translate(${i.left}, 0)`).call(L(c));A.append(()=>x.node());const O=C().keys(["value1","value2"]).order(E).offset(d),P=A.selectAll().data(O(b)),Q=P.join("g").attr("class",t=>`g ${t.key}`).attr("fill",(t,a)=>S[a]),$=Q.selectAll().data(t=>t.map(a=>{const e={...a};return e.index=t.index,e.name=t.key,e}));$.join("rect").attr("class","bar").attr("x",t=>m(t.data.label)).attr("y",t=>c(t[1])).attr("width",m.bandwidth()).attr("height",t=>c(t[0])-c(t[1]));$.join("text").attr("fill","white").attr("x",t=>m(t.data.label)+20).attr("y",t=>c(t[1])+i.top+20).attr("dx","0").attr("dy","0").text((t,a)=>`${t.data.label}：${t[1]-t[0]}`);
